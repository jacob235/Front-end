<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content ="width = device-width", initial-scale = "1">

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js">
</script>

<style>
.error{
	color : red;
}
</style>

<script>
const log = console.log;
let xdata;

$(function(){
	$('#id_check').click(function(){
		idcheck();
	});
});


function idcheck() {
	$.ajax({
		url:'json/id_check.jsp',
		dataType:'json',
		data:{
			id:$('#id').val()
		},
		success:function(data){
			/* xdata = data;
			alert("success  " + data.id); */
			if(data.id == undefined){
				$('#msg1').html("사용가능한 ID 입니다.")
			} else{
				$('#msg1').html('사용 중인 ID 입니다.')
			}
		},
		error:function(e){
			alert("error   " + e);
		}
	});	
}

</script>

<title> 회원가입 </title>
</head>

<body>
<h3> User 회원가입 </h3>
	<form action="addUsers.jsp" method="get">
	<table border="1">
	<tr>
	<td><label for="id"> ID </label></td>
	<td><input type="text" id="id" name="id" value=""/>
	<input type="button" value="중복조회" id="id_check"/>
	<br>
	<span id="msg1" class="error"></span>
	</td>
	</tr>
	<tr>
	<td><label for="pw"> PW </label></td>
	<td colspan = "2"><input type="password" id="pw" name="pw" value=""/></td>
	</tr>
	<tr>
	<td><label for="pw"> NAME </label></td>
	<td colspan = "2"><input type="text" id="name" name="name" value=""/></td>
	</tr>
	<tr>
	<td><label for="role"> ROLE </label></td>
	<td colspan = "2">
	<input type="radio" id="role" name="role" value="admin"/> admin
	<input type="radio" name="role" value="user"/> user
	</td>
	</tr>
	<tr>
	<td colspan = "2">
		<input type="submit" value="회원가입">
		<input type="reset" value="취소">
	</td>
	</tr>
	</table>

	</form>
</body>
</html>